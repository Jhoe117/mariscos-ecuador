<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mariscos del Ecuador ‚Äì Encuesta</title>
  <style>
    :root { --bg:#0b1620; --card:#0f2230; --muted:#9db3c7; --accent:#2bd4a4; --text:#eaf2f9; --warn:#ffcc00; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:linear-gradient(180deg,#081018,#0b1620);color:var(--text);}
    header{padding:32px 20px;text-align:center;border-bottom:1px solid rgba(255,255,255,.06)}
    header h1{margin:0 0 8px;font-size:clamp(28px,5vw,40px)}
    header p{margin:0;color:var(--muted)}
    .container{max-width:920px;margin:0 auto;padding:20px}
    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:18px;align-items:stretch}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .badge{display:inline-block;background:rgba(43,212,164,.12);color:var(--accent);border:1px solid rgba(43,212,164,.35);padding:6px 10px;border-radius:999px;font-size:12px;font-weight:600;letter-spacing:.2px}
    h2{margin:0 0 10px;font-size:24px}
    .muted{color:var(--muted)}
    ul{margin:8px 0 0 18px}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    .tile{aspect-ratio:16/10;border-radius:12px;background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center;color:#d9e8f5;font-weight:600}
    form{display:grid;gap:16px}
    .group label{display:flex;gap:8px;align-items:center;margin:6px 0}
    input[type="text"], select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.12);background:#0b1d2a;color:var(--text)}
    button{padding:12px 16px;border:0;border-radius:12px;cursor:pointer;font-weight:700;background:var(--accent);color:#063326;transition:transform .06s ease, box-shadow .2s}
    button:active{transform:translateY(1px)}
    .note{font-size:12px;color:var(--muted)}
    .ok{background:rgba(43,212,164,.12);border:1px solid rgba(43,212,164,.3);color:#a7f3d0;padding:10px 12px;border-radius:12px}
    .error{background:rgba(255, 174, 0, .08);border:1px solid rgba(255,174,0,.35);color:#ffe08a;padding:10px 12px;border-radius:12px}
    footer{padding:28px 20px;text-align:center;color:var(--muted)}
    @media (max-width: 820px){.hero{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <span class="badge">Sabores del Pac√≠fico</span>
    <h1>Mariscos del Ecuador</h1>
    <p class="muted">Ceviche, encocado, encebollado y m√°s. ¬°Cu√©ntanos tus favoritos! ü¶êüêü</p>
  </header>

  <main class="container">
    <section class="hero">
      <article class="card">
        <h2>Sobre esta p√°gina</h2>
        <p class="muted">Aqu√≠ celebramos la cocina costera ecuatoriana: platos frescos, salsas con coco y caldos potentes. Ay√∫danos a conocer tus gustos respondiendo la peque√±a encuesta.</p>
        <ul>
          <li><strong>Ceviche:</strong> camar√≥n o pescado con lim√≥n, cebolla y cilantro.</li>
          <li><strong>Encocado:</strong> mariscos cocidos en crema de coco, especias y man√≠.</li>
          <li><strong>Encebollado:</strong> caldo de pescado con yuca y curtido.</li>
          <li><strong>Arroz marinero:</strong> mixto de mariscos con arroz y saz√≥n.</li>
        </ul>
        <div class="gallery">
          <div class="tile">Ceviche</div>
          <div class="tile">Encocado</div>
          <div class="tile">Encebollado</div>
        </div>
      </article>

      <aside class="card">
        <h2>Encuesta r√°pida</h2>
        <p class="muted">Tu respuesta nos ayuda a mejorar contenidos y recomendaciones.</p>
        <form id="formEncuesta">
          <!-- EDITA AQU√ç: preguntas de la encuesta -->
          <div class="group">
            <label for="plato"><strong>1) ¬øCu√°l es tu plato de mariscos favorito?</strong></label>
            <label><input type="radio" name="plato" value="Ceviche" required /> Ceviche</label>
            <label><input type="radio" name="plato" value="Encebollado" /> Encebollado</label>
            <label><input type="radio" name="plato" value="Encocado" /> Encocado</label>
            <label><input type="radio" name="plato" value="Camar√≥n apanado" /> Camar√≥n apanado</label>
            <label><input type="radio" name="plato" value="Otro" /> Otro</label>
          </div>

          <div class="group">
            <label for="frecuencia"><strong>2) ¬øCon qu√© frecuencia comes mariscos?</strong></label>
            <select id="frecuencia" required>
              <option value="" disabled selected>Selecciona una opci√≥n</option>
              <option>Semanualmente</option>
              <option>Quincenal</option>
              <option>Mensual</option>
              <option>Muy ocasional</option>
            </select>
          </div>

          <div class="group">
            <label for="ciudad"><strong>3) ¬øEn qu√© ciudad consumes m√°s mariscos?</strong></label>
            <input id="ciudad" type="text" placeholder="Ej: Guayaquil, Manta, Esmeraldas..." />
          </div>

          <button type="submit">Enviar respuesta</button>
          <p class="note">Al enviar, se intenta conectar con tu backend para guardar la respuesta.</p>

          <div id="estado" style="display:none; margin-top:6px"></div>
        </form>
      </aside>
    </section>
  </main>

  <footer>
    <small>Hecho con ‚ù§Ô∏è desde Ecuador. <!-- EDITA AQU√ç: tu nombre o marca --></small>
  </footer>

  <script>
    // ‚ö†Ô∏è EDITA AQU√ç CUANDO CONECTES EL BACKEND:
    // Reemplaza por tu URL p√∫blica (ngrok o IP) + "/responder"
    // Ejemplo: "https://abcd1234.ngrok.io/responder"
    const BACKEND_URL = "http://localhost:3000";


    const form = document.getElementById('formEncuesta');
    const estado = document.getElementById('estado');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const btn = form.querySelector('button[type="submit"]');
      btn.disabled = true;

      const plato = document.querySelector('input[name="plato"]:checked')?.value;
      const frecuencia = document.getElementById('frecuencia').value;
      const ciudad = document.getElementById('ciudad').value.trim();

      const payload = { categoria: 'mariscos_ecuador', plato, frecuencia, ciudad, ts: new Date().toISOString() };

      estado.style.display = 'block';
      estado.className = 'note';
      estado.textContent = 'Enviando‚Ä¶';

      try {
        const res = fetch("http://localhost:3000/responder", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(datos)
})

        if (!res.ok) throw new Error('Respuesta no OK del servidor');
        const data = await res.json().catch(()=>({mensaje:'Respuesta registrada.'}));
        estado.className = 'ok';
        estado.textContent = data.mensaje || '¬°Gracias! Tu respuesta fue guardada.';
        form.reset();
      } catch (err) {
        estado.className = 'error';
        estado.innerHTML = 'No se pudo contactar el backend. <br><span class="note">(Configura la URL p√∫blica en <code>BACKEND_URL</code> cuando est√© listo.)</span>';
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
